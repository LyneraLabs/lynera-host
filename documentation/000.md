# Lynera Hosting Documentation

Welcome to the Lynera Hosting documentation. This guide will help you understand, customize, and deploy your Minecraft server hosting platform.

## Table of Contents

- [Getting Started](#getting-started)
- [Customization Guide](#customization-guide)
- [Stripe Integration](#stripe-integration)
- [Deployment](#deployment)
- [Troubleshooting](#troubleshooting)

## Getting Started

### Prerequisites

- Node.js 18+ installed
- npm or yarn package manager
- Git
- Code editor (VS Code recommended)

### Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/LyneraLabs/lynera-host.git
   cd lynera-host
   ```

2. **Install dependencies**:
   ```bash
   npm install
   ```

3. **Set up environment variables**:
   ```bash
   cp .env.example .env
   ```
   Edit `.env` with your values (see Environment Variables section).

4. **Start development server**:
   ```bash
   npm run dev
   ```

5. **Open browser**:
   Navigate to `http://localhost:3000`

### Project Structure

```
lynera-host/
├── src/
│   ├── app/              # Pages and layouts
│   ├── components/       # Reusable UI components
│   ├── config/           # Business configuration
│   ├── lib/              # Utility functions
│   └── types/            # TypeScript definitions
├── public/               # Static assets
├── .env.example          # Environment variables template
├── package.json          # Dependencies
├── tailwind.config.ts    # Tailwind CSS configuration
└── tsconfig.json         # TypeScript configuration
```

## Customization Guide

### Updating Pricing Plans

**Location**: `src/config/pricing.ts`

To add, edit, or remove pricing plans:

```typescript
export const pricingPlans: PricingPlan[] = [
  {
    id: 'starter',              // Unique identifier
    name: 'Starter',            // Display name
    description: 'Perfect for small communities',
    priceMonthly: 9.99,         // Monthly price
    features: [                 // Feature list
      '2GB RAM',
      '2 CPU Cores',
      '20GB NVMe Storage',
    ],
    isPopular: false,           // Optional "Most Popular" badge
    stripeProductId: 'prod_xxx', // From Stripe Dashboard
    stripePriceId: 'price_xxx',  // From Stripe Dashboard
  },
  // Add more plans here...
]
```

**Tips**:
- Keep plan IDs lowercase with hyphens (e.g., `gaming-pro`)
- Update Stripe IDs after creating products in Stripe
- Feature lists should be clear and concise
- Set `isPopular: true` on one plan to highlight it

### Managing Add-ons

**Location**: `src/config/addons.ts`

Add-ons enhance hosting plans with additional features:

```typescript
export const addons: Addon[] = [
  {
    id: 'extra-ram-2gb',
    name: 'Extra RAM +2GB',
    description: 'Boost your server performance',
    priceMonthly: 5.99,
    category: 'performance',    // performance, storage, features, support
    stripeProductId: 'prod_xxx',
    stripePriceId: 'price_xxx',
    
    // Optional: Restrict to specific plans
    requiresPlanIds: ['gamer', 'pro', 'enterprise'],
    
    // Optional: Mark as incompatible with other add-ons
    incompatibleWith: ['extra-ram-4gb'],
  },
]
```

**Add-on Categories**:
- `performance`: RAM, CPU upgrades
- `storage`: Disk space increases
- `features`: Services like databases, IPs
- `support`: Priority support options

**Compatibility Rules**:
- `requiresPlanIds`: Only show for specific plans
- `incompatibleWith`: Disable when conflicting add-on is selected
- UI automatically enforces these rules

### Customizing Hardware Specifications

**Location**: `src/config/hardware.ts`

Update hardware details shown on pricing page:

```typescript
export const hardwareSpecs: HardwareSpec[] = [
  {
    id: 'cpu',
    title: 'Enterprise CPUs',
    description: 'Latest generation AMD Ryzen and Intel Xeon',
  },
  // Add more specs...
]
```

### Editing About Page Content

**Location**: `src/config/about.ts`

Customize your company story and FAQ:

```typescript
export const aboutConfig = {
  hero: {
    title: 'About Lynera Hosting',
    description: 'Your company tagline',
  },
  mission: {
    title: 'Our Mission',
    content: 'Your mission statement...',
  },
  values: [
    {
      title: 'Performance',
      description: 'What you value...',
    },
  ],
  faq: [
    {
      question: 'Your question?',
      answer: 'Your answer...',
    },
  ],
}
```

### Changing Brand Colors

**Option 1: Tailwind Config** (Recommended)

Edit `tailwind.config.ts`:

```typescript
theme: {
  extend: {
    colors: {
      primary: '#e2adf2',    // Your primary color
      secondary: '#654597',  // Your secondary color
    },
  },
},
```

**Option 2: CSS Variables**

Edit `src/app/globals.css`:

```css
:root {
  --color-primary: #e2adf2;
  --color-secondary: #654597;
}
```

After changing colors, restart the dev server:
```bash
npm run dev
```

### Updating Site Metadata

**Location**: `src/config/site.ts`

```typescript
export const siteConfig = {
  name: 'Your Company Name',
  description: 'Your description',
  url: process.env.NEXT_PUBLIC_SITE_URL || 'http://localhost:3000',
  mainNav: [
    { title: 'Home', href: '/' },
    { title: 'Pricing', href: '/pricing' },
    { title: 'About', href: '/about' },
  ],
  footerNav: [
    // Footer navigation sections
  ],
}
```

## Stripe Integration

### Setting Up Stripe

1. **Create Stripe Account**:
   - Sign up at https://stripe.com
   - Complete business verification

2. **Get API Keys**:
   - Dashboard → Developers → API Keys
   - Copy "Publishable key" and "Secret key"

3. **Create Products**:
   For each plan and add-on:
   - Dashboard → Products → Add Product
   - Set name, description, and price
   - Choose "Recurring" for subscriptions
   - Set billing period to "Monthly"
   - Copy Product ID and Price ID

4. **Update Configuration**:
   Replace placeholder IDs in:
   - `src/config/pricing.ts`
   - `src/config/addons.ts`

### Environment Variables

Create `.env` file (never commit this):

```env
# Stripe Secret Key (Server-side only)
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxx

# Stripe Publishable Key (Client-side)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxxxxx

# Site URL
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### Implementing Checkout

1. **Install Stripe SDK**:
   ```bash
   npm install stripe @stripe/stripe-js
   ```

2. **Update API Route** (`src/app/api/create-checkout-session/route.ts`):
   
   Replace the placeholder with:
   
   ```typescript
   import { NextRequest, NextResponse } from 'next/server'
   import Stripe from 'stripe'
   
   const stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {
     apiVersion: '2023-10-16',
   })
   
   export async function POST(req: NextRequest) {
     try {
       const body = await req.json()
       const { line_items, success_url, cancel_url } = body
       
       const session = await stripe.checkout.sessions.create({
         line_items,
         mode: 'subscription',
         success_url,
         cancel_url,
       })
       
       return NextResponse.json({ sessionId: session.id })
     } catch (error) {
       return NextResponse.json(
         { error: 'Failed to create checkout session' },
         { status: 500 }
       )
     }
   }
   ```

3. **Update Order Page** (`src/app/order/page.tsx`):
   
   Replace the `handleCheckout` function:
   
   ```typescript
   const handleCheckout = async () => {
     if (!selectedPlan) {
       alert('Please select a plan first')
       return
     }
     
     const payload = createCheckoutPayload(
       selectedPlan,
       selectedAddons,
       siteConfig.url
     )
     
     const response = await fetch('/api/create-checkout-session', {
       method: 'POST',
       headers: { 'Content-Type': 'application/json' },
       body: JSON.stringify(payload),
     })
     
     const { sessionId } = await response.json()
     
     // Redirect to Stripe Checkout
     const stripe = await loadStripe(
       process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!
     )
     await stripe?.redirectToCheckout({ sessionId })
   }
   ```

### Testing Stripe Integration

Use Stripe test cards:
- Success: `4242 4242 4242 4242`
- Requires authentication: `4000 0025 0000 3155`
- Declined: `4000 0000 0000 9995`

Any future date and any CVC.

## Deployment

### Deploying to Vercel (Recommended)

1. **Push to GitHub**:
   ```bash
   git add .
   git commit -m "Initial deployment"
   git push origin main
   ```

2. **Import to Vercel**:
   - Go to https://vercel.com
   - Click "New Project"
   - Import your GitHub repository

3. **Configure Environment Variables**:
   In Vercel dashboard, add:
   - `STRIPE_SECRET_KEY`
   - `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`
   - `NEXT_PUBLIC_SITE_URL`

4. **Deploy**:
   - Click "Deploy"
   - Wait for build to complete
   - Your site is live!

### Custom Domain

1. In Vercel dashboard → Settings → Domains
2. Add your domain
3. Configure DNS records as shown
4. Update `NEXT_PUBLIC_SITE_URL` to your domain

### Automatic Deployments

Every push to `main` branch triggers automatic deployment.

## Troubleshooting

### Build Errors

**Issue**: Build fails with module errors
```bash
npm run build
```

**Solution**: Clear cache and reinstall
```bash
rm -rf node_modules .next
npm install
npm run build
```

### Tailwind Classes Not Working

**Issue**: Custom classes not being applied

**Solution**: Ensure class names are complete strings (not concatenated)
```typescript
// ❌ Bad
className={`bg-${color}-500`}

// ✅ Good
className={color === 'primary' ? 'bg-primary' : 'bg-secondary'}
```

### Environment Variables Not Loading

**Issue**: `process.env.NEXT_PUBLIC_*` is undefined

**Solution**: 
1. Restart dev server after `.env` changes
2. Ensure `NEXT_PUBLIC_` prefix for client-side variables
3. Check variable names match exactly

### Stripe Checkout Not Working

**Issue**: Checkout button doesn't redirect

**Solutions**:
1. Verify Stripe keys in `.env`
2. Check Product and Price IDs are correct
3. Ensure API route is implemented
4. Look for errors in browser console
5. Test with Stripe test mode keys first

### TypeScript Errors

**Issue**: Type errors in components

**Solution**: Check imports and interfaces
```bash
npm run build
```
TypeScript errors will be shown during build.

## Additional Resources

- [Next.js Documentation](https://nextjs.org/docs)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Stripe Documentation](https://stripe.com/docs)
- [Vercel Documentation](https://vercel.com/docs)

## Support

For issues and questions:
- GitHub Issues: [Report a bug](https://github.com/LyneraLabs/lynera-host/issues)
- Email: support@lynerahosting.com

## License

This project is provided as-is for Lynera Hosting.
